(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{D77H:function(module,exports,e){},F9YM:function(module,e,t){"use strict";t.d(e,"c",(function(){return formatTime})),t.d(e,"e",(function(){return getTimeFromDuration})),t.d(e,"a",(function(){return buildParagraphs})),t.d(e,"b",(function(){return findCuesAroundTime})),t.d(e,"d",(function(){return getAdjacentCues}));var n=t("wd/R"),a=t.n(n),findCueIndexForTime=function(e,t){return function findCueIndexForTimeHelper(e,t,n,a){if(t>n)return-1;var r=n-Math.floor((n-t)/2);return a<e[r].startTime?findCueIndexForTimeHelper(e,t,r-1,a):r!==e.length-1&&a>=e[r+1].startTime?findCueIndexForTimeHelper(e,r+1,n,a):r}(e,0,e.length-1,t)},formatTime=function(e){var t="m:ss",n=1e3*e;return a.a.duration(n).hours()>0&&(t="h:m"+t),a.a.utc(n).locale("en").format(t)},getTimeFromDuration=function(e){var t=1e3*e,n=a.a.duration(t),r=n.hours(),o=n.minutes();return{seconds:n.seconds(),minutes:o,hours:r}},buildParagraphs=function(e){var t,n,a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=[];return e.forEach((function(e){n&&(a=e.startTime-n.endTime),(!t||a>=r)&&(t=[],o.push(t)),e.hideForTrimmingRange||t.push(e),n=e})),o.filter((function(e){return e.length>0}))},findCuesAroundTime=function(e,t){var n=e[findCueIndexForTime(e,t)];return n?[n]:[]},getAdjacentCues=function(e,t,n){var a=findCueIndexForTime(e,t);return-1===a&&e.length>2?[0,1,2].map((function(t){return e[t]})):a<0||a>=e.length?[]:"en"===n?function(e,t){for(var n=[],a=e-1;-1!==a;){var r=t[a];if("."===r.text[r.text.length-1])break;n.unshift(a),a-=1}for(var o=e;o<=t.length-1;){var i=t[o];if(n.push(o),"."===i.text[i.text.length-1])break;o+=1}return n}(a,e).map((function(t){return e[t]})):function(e,t){var n=[],a=[];return e>=2&&a.push(e-2),e>=1&&a.push(e-1),e<t-1&&n.push(e+1),e<t-2&&n.push(e+2),[].concat(a,[e],n)}(a,e.length).map((function(t){return e[t]}))}},Ne6o:function(module,exports,e){var t=e("OIEB"),n=t.default?t.default:{},a=(0,e("HdzH").default)(n);a.getLocale=function(){return"en"},module.exports=a},OIEB:function(module,exports){exports.default={"ar":true,"de":true,"el":true,"es":true,"fa-af":true,"fr":true,"hi":true,"hu":true,"id":true,"it":true,"ja":true,"kk":true,"ko":true,"nl":true,"pl":true,"ps":true,"pt":true,"ru":true,"sv":true,"th":true,"tr":true,"uk":true,"zh":true,"zh-hk":"zh-tw","zh-mo":"zh-tw","zh-tw":true}},c5cO:function(module,e,t){"use strict";t.r(e);var n,a,r,o,i,c,s,u,d,l,m,g,p,f,v,b,h,x,O,j,N,T,I,S,y,E,C,w,P,U,D,k,M,V,W,z,L,F,A,Q,q,H=t("VkAN"),R=t.n(H),Y=t("J4zp"),B=t.n(Y),G=t("AeFk"),J=t("q1tI"),Z=t.n(J),X=t("HOoY"),K=t("kgYC"),ee=t("FdHa"),te=t("8Hdl"),ne=t("1HaE"),ae=t("Ns7p"),re=t("Gcrz"),oe=t("UYTu"),ie=Object(oe.a)(n||(n=R()(['\n  query VideoCourseMaterialsQuery($slug: String!) {\n    OnDemandCourseMaterialsV2 @naptime {\n      slug(slug: $slug, showHidden: true, includes: "modules") {\n        elements {\n          id\n          name\n        }\n        linked {\n          onDemandCourseMaterialModulesV1 {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n']))),data_CourseContentDataProvider=function(e){var t=e.courseSlug,n=e.children;return(Z.a.createElement(re.c,{query:ie,variables:{slug:t}},(function(e){var a,r=e.loading,o=e.error,i=e.data;if(o||r)return n({course:null,modules:null,error:!!o,loading:!!r});var c=((null==i?void 0:i.OnDemandCourseMaterialsV2)||{}).slug,s=null==c?void 0:null===(a=c.elements)||void 0===a?void 0:a[0].id,u=(c||{}).elements[0].name,d=((c||{}).linked||{}).onDemandCourseMaterialModulesV1;return n({course:{id:s,name:u,slug:t},modules:d,error:!1,loading:!1})})))},ce=t("cVIm"),se=t("TOZ3"),ue=t("CsdX"),de=t("wwtN"),le=t("8WNh"),me=t("Ne6o"),ge=t.n(me),pe=(t("nS3k"),"".concat(ce.a.url.resource_assets,"learner/icon_note.svg")),fe="".concat(ce.a.url.resource_assets,"learner/icon_highlight.svg"),private_NotesReviewPageDataState=function(e){var t=e.dataState;return(Z.a.createElement(se.b,{"aria-live":"assertive","aria-atomic":!0,"aria-relevant":"text",rootClassName:"rc-NotesReviewPageDataState",flexDirection:"column",justifyContent:"start",alignItems:"center"},"error"===t&&[Z.a.createElement(de.a,{key:"icon",size:84,color:ue.b.error}),Z.a.createElement("div",{key:"message",className:"data-state-message headline-5-text","aria-live":"assertive","aria-atomic":!0,"aria-relevant":"text"},ge()("There was an issue loading your notes data. Please try refreshing the page."))],"loading"===t&&[a||(a=Z.a.createElement(le.a,{key:"icon",size:84})),Z.a.createElement("div",{key:"message",className:"data-state-message headline-5-text"},ge()("Loading notes..."))],"empty"===t&&[Z.a.createElement(se.b,{justifyContent:"center",rootClassName:"state-icons"},Z.a.createElement("img",{src:pe,alt:ge()("Take notes"),className:"placeholder-icon"}),Z.a.createElement("img",{src:fe,alt:ge()("Highlight"),className:"placeholder-icon"})),Z.a.createElement("div",{"aria-live":"assertive","aria-atomic":!0,"aria-relevant":"text",key:"message",className:"data-state-message headline-5-text"},ge()("You have not added any notes yet. Notes can be created from video pages."))]))},ve=t("3tO9"),be=t.n(ve),he=t("RIqP"),xe=t.n(he),Oe=t("6/Gu"),je=t("ZJgU"),Ne=t("fsL8"),Te=t.n(Ne),Ie=t("yXPU"),Se=t.n(Ie),ye=t("mDxB"),cloneData=function(e){return JSON.parse(JSON.stringify(e))},Ee=Object(oe.a)(r||(r=R()(["\n  query NotesDataQuery($courseId: String!, $start: Int, $limit: Int) {\n    UserNotesV1 @naptime {\n      courseWithContentSort(courseId: $courseId, start: $start, limit: $limit) {\n        elements {\n          id\n          userText\n          createdAt\n          updatedAt\n          details\n        }\n        paging\n      }\n    }\n  }\n"]))),CourseNotesDataProvider_CourseNotesQueryProvider=function(e){var t=e.course,n=e.pageSize,a=e.children;return(Z.a.createElement(re.c,{query:Ee,variables:{courseId:t.id,start:0,limit:n},notifyOnNetworkStatusChange:!0},(function(e){var t,r=e.loading,o=e.error,i=e.data,c=e.fetchMore;if(o)return a({notes:null,onLastPage:!1,error:!0,fetchNextPage:(t=Se()(Te()().mark((function _callee(){return Te()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),_callee)}))),function(){return t.apply(this,arguments)}),loadingInitialPage:!1,loadingNextPage:!1});var s,u=((i||{}).UserNotesV1||{}).courseWithContentSort;if(r&&!(u||{}).elements)return a({notes:null,onLastPage:!1,error:!1,fetchNextPage:(s=Se()(Te()().mark((function _callee2(){return Te()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),_callee2)}))),function(){return s.apply(this,arguments)}),loadingInitialPage:!0,loadingNextPage:!1});var d=((u||{}).elements||[]).map(ye.e),l=(u||{}).paging,m=!l||!l.next||l.total&&l.next>=l.total,g=function(){var e=Se()(Te()().mark((function _callee3(){return Te()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({variables:{start:d.length,limit:n},updateQuery:function(e,t){var n=t.fetchMoreResult,a=cloneData(e);if(!n)return a;var r=a;r.UserNotesV1.courseWithContentSort.elements=[].concat(xe()(e.UserNotesV1.courseWithContentSort.elements),xe()(n.UserNotesV1.courseWithContentSort.elements));var o=n.UserNotesV1.courseWithContentSort.paging;return r.UserNotesV1.courseWithContentSort.paging=o,r}});case 2:case"end":return e.stop()}}),_callee3)})));return function(){return e.apply(this,arguments)}}();return d.length-n>=0&&(d[d.length-n].shouldFocusOn=!0),a({notes:d,fetchNextPage:g,onLastPage:m,error:!1,loadingInitialPage:!1,loadingNextPage:r})})))},Ce=Object(oe.a)(o||(o=R()(["\n  mutation DeleteNoteMutation($noteId: String!) {\n    UserNotesV1 @naptime {\n      delete(id: $noteId) {\n        id\n      }\n    }\n  }\n"]))),CourseNotesDataProvider_CourseNotesDeletionProvider=function(e){var t=e.course,n=e.pageSize,a=e.children;return(Z.a.createElement(re.b,{mutation:Ce},(function(e){return a({deleteNote:function(a){e({variables:{noteId:a},update:function(e){var r=e.readQuery({query:Ee,variables:{courseId:t.id,start:0,limit:n}}),o=cloneData(r),i=((((r||{}).UserNotesV1||{}).courseWithContentSort||{}).elements||[]).filter((function(e){return e.id!==a})),c=o;c.UserNotesV1.courseWithContentSort.elements=i,e.writeQuery({query:Ee,variables:{courseId:t.id,start:0,limit:n},data:c})}})}})})))},we=Object(oe.a)(i||(i=R()(["\n  mutation UpdateNoteMutation($noteId: String!, $noteDraft: DataMap!) {\n    UserNotesV1 @naptime {\n      update(id: $noteId, input: $noteDraft) {\n        elements {\n          id\n          userText\n          createdAt\n          updatedAt\n          details\n        }\n      }\n    }\n  }\n"]))),CourseNotesDataProvider_CourseNotesUpdateProvider=function(e){var t=e.children;return(Z.a.createElement(re.b,{mutation:we},(function(e){return t({updateNote:function(t,n){e({variables:{noteId:t,noteDraft:n}})}})})))},data_CourseNotesDataProvider=function(e){var t=e.course,n=e.pageSize,a=e.children;return(Z.a.createElement(CourseNotesDataProvider_CourseNotesQueryProvider,{course:t,pageSize:n},(function(e){var r=e.notes,o=e.fetchNextPage,i=e.error,c=e.loadingInitialPage,s=e.loadingNextPage,u=e.onLastPage;return(Z.a.createElement(CourseNotesDataProvider_CourseNotesDeletionProvider,{course:t,pageSize:n},(function(e){var t=e.deleteNote;return(Z.a.createElement(CourseNotesDataProvider_CourseNotesUpdateProvider,null,(function(e){var n=e.updateNote;return a({notes:r,onLastPage:u,fetchNextPage:o,deleteNote:t,updateNote:n,error:i,loadingInitialPage:c,loadingNextPage:s})})))})))})))},ModuleNotesDataProvider_cloneData=function(e){return JSON.parse(JSON.stringify(e))},Pe=Object(oe.a)(c||(c=R()(["\n  query NotesModuleQuery($courseId: String!, $moduleId: String!, $start: Int, $limit: Int) {\n    UserNotesV1 @naptime {\n      courseModuleWithContentSort(courseId: $courseId, moduleId: $moduleId, start: $start, limit: $limit) {\n        elements {\n          id\n          userText\n          createdAt\n          updatedAt\n          details\n        }\n        paging\n      }\n    }\n  }\n"]))),ModuleNotesDataProvider_ModuleNotesQueryProvider=function(e){var t=e.course,module=e.module,n=e.pageSize,a=e.children;return(Z.a.createElement(re.c,{query:Pe,variables:{courseId:t.id,moduleId:module.id,start:0,limit:n},notifyOnNetworkStatusChange:!0},(function(e){var t,r,o=e.loading,i=e.error,c=e.data,s=e.fetchMore;if(i)return a({notes:null,onLastPage:!1,fetchNextPage:(t=Se()(Te()().mark((function _callee(){return Te()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),_callee)}))),function(){return t.apply(this,arguments)}),error:!0,loadingInitialPage:!1,loadingNextPage:!1});if(o&&!(((c||{}).UserNotesV1||{}).courseModuleWithContentSort||{}).elements)return a({notes:null,onLastPage:!1,fetchNextPage:(r=Se()(Te()().mark((function _callee2(){return Te()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),_callee2)}))),function(){return r.apply(this,arguments)}),error:!1,loadingInitialPage:!0,loadingNextPage:!1});var u=((c||{}).UserNotesV1||{}).courseModuleWithContentSort,d=((u||{}).elements||[]).map(ye.e),l=(u||{}).paging,m=!l||!l.next||l.total&&l.next>=l.total,g=function(){var e=Se()(Te()().mark((function _callee3(){return Te()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s({variables:{start:d.length,limit:n},updateQuery:function(e,t){var n=t.fetchMoreResult,a=ModuleNotesDataProvider_cloneData(e);if(!n)return a;var r=a;r.UserNotesV1.courseModuleWithContentSort.elements=[].concat(xe()(e.UserNotesV1.courseModuleWithContentSort.elements),xe()(n.UserNotesV1.courseModuleWithContentSort.elements));var o=n.UserNotesV1.courseModuleWithContentSort.paging;return r.UserNotesV1.courseModuleWithContentSort.paging=o,r}});case 2:case"end":return e.stop()}}),_callee3)})));return function(){return e.apply(this,arguments)}}();return d.length-n>=0&&(d[d.length-n].shouldFocusOn=!0),a({notes:d,fetchNextPage:g,onLastPage:m,error:!1,loadingInitialPage:!1,loadingNextPage:!!o})})))},Ue=Object(oe.a)(s||(s=R()(["\n  mutation DeleteNoteMutation($noteId: String!) {\n    UserNotesV1 @naptime {\n      delete(id: $noteId) {\n        id\n      }\n    }\n  }\n"]))),ModuleNotesDataProvider_ModuleNotesDeletionProvider=function(e){var t=e.course,module=e.module,n=e.pageSize,a=e.children;return(Z.a.createElement(re.b,{mutation:Ue},(function(e){return a({deleteNote:function(a){e({variables:{noteId:a},update:function(e){var r=e.readQuery({query:Pe,variables:{courseId:t.id,moduleId:module.id,start:0,limit:n}}),o=ModuleNotesDataProvider_cloneData(r),i=((((r||{}).UserNotesV1||{}).courseModuleWithContentSort||{}).elements||[]).filter((function(e){return e.id!==a})),c=o;c.UserNotesV1.courseModuleWithContentSort.elements=i,e.writeQuery({query:Pe,variables:{courseId:t.id,moduleId:module.id,start:0,limit:n},data:c})}})}})})))},De=Object(oe.a)(u||(u=R()(["\n  mutation UpdateNoteMutation($noteId: String!, $noteDraft: DataMap!) {\n    UserNotesV1 @naptime {\n      update(id: $noteId, input: $noteDraft) {\n        elements {\n          id\n          userText\n          createdAt\n          updatedAt\n          details\n        }\n      }\n    }\n  }\n"]))),ModuleNotesDataProvider_ModuleNotesUpdateProvider=function(e){var t=e.children;return(Z.a.createElement(re.b,{mutation:De},(function(e){return t({updateNote:function(t,n){e({variables:{noteId:t,noteDraft:n}})}})})))},data_ModuleNotesDataProvider=function(e){var t=e.course,module=e.module,n=e.pageSize,a=e.children;return(Z.a.createElement(ModuleNotesDataProvider_ModuleNotesQueryProvider,{course:t,module:module,pageSize:n},(function(e){var r=e.notes,o=e.fetchNextPage,i=e.error,c=e.loadingInitialPage,s=e.loadingNextPage,u=e.onLastPage;return(Z.a.createElement(ModuleNotesDataProvider_ModuleNotesDeletionProvider,{course:t,module:module,pageSize:n},(function(e){var t=e.deleteNote;return(Z.a.createElement(ModuleNotesDataProvider_ModuleNotesUpdateProvider,null,(function(e){var n=e.updateNote;return a({notes:r,onLastPage:u,fetchNextPage:o,deleteNote:t,updateNote:n,error:i,loadingInitialPage:c,loadingNextPage:s})})))})))})))},data_ContentNotesDataProvider=function(e){var t=e.contentType,n=e.course,module=e.module,a=e.pageSize,r=void 0===a?10:a,o=e.children;return"module"===t?module?Z.a.createElement(data_ModuleNotesDataProvider,{course:n,module:module,pageSize:r},(function(e){return o(e)})):null:Z.a.createElement(data_CourseNotesDataProvider,{course:n,pageSize:r},(function(e){return o(e)}))},ke=t("p6CZ"),review_page_Divider=function(){Object(K.a)();return Object(G.d)("div",{css:Object(G.c)(d||(d=R()(["\n        width: 100%;\n        margin: var(--cds-spacing-300) 0;\n        border-top: 1px solid var(--cds-color-grey-50);\n      "])))})},Me=t("l1rq"),Ve=t("F9YM"),We=function(e){return e[e.VIEW=0]="VIEW",e[e.EDIT=1]="EDIT",e[e.DELETE=2]="DELETE",e}({}),note_NoteDelete=function(e){var t=e.setCurrentState,n=e.onDelete,a=e.text,r=e.note,o=(Object(K.a)(),Object(Ve.c)(r.noteStartTs)),i=r.noteEndTs?Object(Ve.c)(r.noteEndTs):"",c=r.itemName;return Object(G.d)(J.Fragment,null,a&&Object(G.d)(J.Fragment,null,Object(G.d)(Me.a,{component:"p",css:Object(G.c)(l||(l=R()(["\n              margin: var(--cds-spacing-200) 0 var(--cds-spacing-100);\n            "]))),variant:"subtitleMedium"},ge()("Your Notes")),Object(G.d)(Me.a,{component:"p",variant:"bodyPrimary"},a)),Object(G.d)(Oe.a,{container:!0,alignItems:"flex-end",css:{flexGrow:1}},Object(G.d)(Oe.a,{item:!0,container:!0,justifyContent:"flex-start",alignItems:"center"},Object(G.d)(Oe.a,{item:!0,css:{margin:"var(--cds-spacing-200) var(--cds-spacing-400) 0 0"}},Object(G.d)(Me.a,{component:"p",variant:"bodyPrimary","aria-live":"polite"},ge()("Are you sure you want to delete the entire note?"))),Object(G.d)(Oe.a,{item:!0,container:!0,css:Object(G.c)(m||(m=R()(["\n              flex-basis: 0;\n              flex-wrap: nowrap;\n              margin: var(--cds-spacing-200) 0 0;\n            "])))},Object(G.d)(Oe.a,{item:!0,css:Object(G.c)(g||(g=R()(["\n                margin: 0 var(--cds-spacing-200) 0 0;\n              "])))},Object(G.d)(je.a,{onClick:function(){n(),t(We.VIEW)},size:"small",variant:"primary","aria-label":ge()("Delete your notes for #{itemName} from time #{noteStartTimestamp} to #{noteEndTimestamp}",{itemName:c,noteStartTimestamp:o,noteEndTimestamp:i})},ge()("Delete"))),Object(G.d)(Oe.a,{item:!0},Object(G.d)(je.a,{onClick:function(){return t(We.VIEW)},size:"small",variant:"secondary","aria-label":ge()("Cancel deleting your notes for #{itemName} from time #{noteStartTimestamp} to #{noteEndTimestamp}",{itemName:c,noteStartTimestamp:o,noteEndTimestamp:i})},ge()("Cancel")))))))},_e=t("Who7"),note_NoteEdit=function(e){var t=e.setCurrentState,n=e.text,a=e.onSave,r=(Object(K.a)(),Object(J.useState)(n)),o=B()(r,2),i=o[0],c=o[1],s=n.split(" ",20).join(" ");return Object(G.d)(J.Fragment,null,Object(G.d)(Me.a,{component:"p",css:Object(G.c)(p||(p=R()(["\n          margin: var(--cds-spacing-200) 0 var(--cds-spacing-100);\n        "]))),variant:"subtitleMedium"},ge()("Your Notes")),Object(G.d)("textarea",{"aria-label":ge()("Your Notes"),autoFocus:!0,css:be()({width:"100%",maxHeight:"175px",overflowY:"scroll",margin:"0 0 0",padding:"var(--cds-spacing-200)",border:"1px solid var(--cds-color-grey-300)",borderRadius:2},_e.c.bodyPrimary),id:"edit-note",defaultValue:i,onChange:function(e){return c(e.target.value)},rows:3}),Object(G.d)(Oe.a,{container:!0,justifyContent:"flex-start",css:{margin:"var(--cds-spacing-200) 0 0"}},Object(G.d)(Oe.a,{item:!0},Object(G.d)(je.a,{onClick:function(){a(i),t(We.VIEW)},size:"small",variant:"primary","aria-label":ge()("Save your notes for #{text}",{text:s})},ge()("Save"))),Object(G.d)(Oe.a,{item:!0},Object(G.d)(je.a,{css:Object(G.c)(f||(f=R()(["\n              margin: 0 0 0 var(--cds-spacing-200);\n            "]))),onClick:function(){return t(We.VIEW)},size:"small",variant:"secondary","aria-label":ge()("Cancel editing notes for #{text}",{text:s})},ge()("Cancel")))))},ze=t("GUMY"),Le=t("Ys1X"),$e=t("9A5E"),NoteInformation_VideoSnapshot=function(e){var t=e.snapshotUrl,n=(Object(K.a)(),Object(G.c)(v||(v=R()(["\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    opacity: 0;\n    background: var(--cds-color-grey-975);\n    transition: opacity 0.2s linear;\n\n    :hover {\n      opacity: 0.6;\n    }\n  "])))),a=Object(G.c)(b||(b=R()(["\n    top: 50%;\n    left: 50%;\n    position: absolute;\n    transform: translate(-50%, -50%);\n  "])));return Object(G.d)("div",{css:Object(G.c)(h||(h=R()(["\n        width: 197px;\n        position: relative;\n      "])))},Object(G.d)("div",{css:n},Object(G.d)(Me.a,{component:"p",color:"invertBody",css:a},ge()("Go to video"))),Object(G.d)("img",{css:Object(G.c)(x||(x=R()(["\n          width: 100%;\n          border: 1px solid var(--cds-color-grey-200);\n        "]))),src:t,alt:ge()("note")}))},note_NoteInformation=function(e){var t,n,a,r,o=e.note,i=e.course,c=Object(K.a)(),s=Object(Ve.c)(o.noteStartTs),u=o.noteEndTs?Object(Ve.c)(o.noteEndTs):"",d=u?ge()("#{itemName}, video starts at #{videoNoteStartTimestamp} to #{videoNoteEndTimestamp}",{itemName:o.itemName,videoNoteStartTimestamp:s,videoNoteEndTimestamp:u}):ge()("#{itemName}, video starts at #{videoNoteStartTimestamp}",{itemName:o.itemName,videoNoteStartTimestamp:s});return Object(G.d)(J.Fragment,null,Object(G.d)(Oe.a,{container:!0,alignItems:"center",wrap:"nowrap"},!o.snapshotUrl&&Object(G.d)("div",{css:Object(G.c)(O||(O=R()(["\n              flex-shrink: 0;\n              height: var(--cds-spacing-300);\n            "])))},j||(j=Object(G.d)(ze.a,{size:"large"}))),Object(G.d)($e.a,{trackingName:"highlight_link",data:{itemId:o.itemId},href:(n=i.slug,a=null!==(t=o.itemId)&&void 0!==t?t:"",r=o.noteStartTs,"".concat(Object(Le.c)(n),"/lecture/").concat(a,"?t=").concat(Math.trunc(r))),target:"_blank",role:"link",rel:"noopener noreferrer",css:Object(G.c)(N||(N=R()(["\n            margin: ",";\n          "])),c.spacing(0,0,0,o.snapshotUrl?0:8)),ariaLabel:d},o.snapshotUrl&&Object(G.d)("div",{"data-e2e":"snapshot-container",css:Object(G.c)(T||(T=R()(["\n                margin: 0 0 var(--cds-spacing-200) 0;\n              "])))},Object(G.d)(NoteInformation_VideoSnapshot,{snapshotUrl:o.snapshotUrl})),Object(G.d)(Me.a,{component:"p",color:"inherit"},o.itemName))),Object(G.d)(Me.a,{component:"p",css:Object(G.c)(I||(I=R()(["\n          margin: ",";\n\n          "," {\n            margin: ",";\n          }\n        "])),c.spacing(4,0,0,o.snapshotUrl?0:32),ee.a.down("sm"),c.spacing(4,0,16,o.snapshotUrl?0:32)),variant:"bodySecondary",color:"supportText","aria-label":ge()("Duration"),dir:"ltr"},function(e){var t=e.noteStartTs,n=e.noteEndTs,a=e.captureTs;return t&&n?"".concat(Object(Ve.c)(t)," - ").concat(Object(Ve.c)(n)):"".concat(Object(Ve.c)(a))}(o)))},Fe=t("UIee"),Ae=t("rGs/"),note_NoteView=function(e){var t=e.text,n=e.setCurrentState,a=e.note,r=(Object(K.a)(),function(e){var t=a.itemName,n=Object(Ve.c)(a.noteStartTs),r=a.noteEndTs?Object(Ve.c)(a.noteEndTs):"";return t?"EDIT"===e?r?ge()("Edit your notes for #{videoName} from time #{videoNoteStartTimestamp} to #{videoNoteEndTimestamp}",{videoName:t,videoNoteStartTimestamp:n,videoNoteEndTimestamp:r}):ge()("Edit your notes for #{videoName} from time #{videoNoteStartTimestamp}",{videoName:t,videoNoteStartTimestamp:n}):r?ge()("Delete your notes for #{videoName} from time #{videoNoteStartTimestamp} to #{videoNoteEndTimestamp}",{videoName:t,videoNoteStartTimestamp:n,videoNoteEndTimestamp:r}):ge()("Delete your notes for #{videoName} from time #{videoNoteStartTimestamp}",{videoName:t,videoNoteStartTimestamp:n}):"EDIT"===e?ge()("Edit your notes"):ge()("Delete your notes")});return Object(G.d)(J.Fragment,null,t&&Object(G.d)(J.Fragment,null,Object(G.d)(Me.a,{component:"p",css:Object(G.c)(S||(S=R()(["\n              margin: var(--cds-spacing-200) 0 var(--cds-spacing-100);\n            "]))),variant:"subtitleMedium","data-e2e":"video-note-label"},ge()("Your Notes")),Object(G.d)(Me.a,{component:"p",variant:"bodyPrimary","data-e2e":"video-note-text"},t)),Object(G.d)(Oe.a,{container:!0,alignItems:"flex-end",css:{flexGrow:1}},Object(G.d)(Oe.a,{container:!0,justifyContent:"flex-start",css:{margin:"var(--cds-spacing-200) 0 0"}},Object(G.d)(Oe.a,{item:!0,css:Object(G.c)(y||(y=R()(["\n              /* Required to align the text in the button correctly with the rest of the notes */\n              margin-left: -8px;\n            "])))},Object(G.d)(je.a,{icon:E||(E=Object(G.d)(Fe.a,{size:"small"})),iconPosition:"before",onClick:function(){return n(We.EDIT)},size:"small",variant:"ghost","aria-label":r("EDIT")},ge()("Edit"))),Object(G.d)(Oe.a,{css:Object(G.c)(C||(C=R()(["\n              margin: 0 0 0 var(--cds-spacing-200);\n            "]))),item:!0},Object(G.d)(je.a,{icon:w||(w=Object(G.d)(Ae.a,{size:"small"})),iconPosition:"before",onClick:function(){return n(We.DELETE)},size:"small",variant:"ghost","aria-label":r("DELETE")},ge()("Delete"))))))},Qe=Object(J.forwardRef)((function(e,t){var n=e.note,a=e.course,r=e.onSave,o=e.onDelete,i=Object(J.useState)(We.VIEW),c=B()(i,2),s=c[0],u=c[1],d=(Object(K.a)(),n.itemName),l=Object(Ve.c)(n.noteStartTs),m=n.noteEndTs?Object(Ve.c)(n.noteEndTs):"";return Object(G.d)("li",{css:Object(G.c)(P||(P=R()(["\n        width: 100%;\n        list-style: none;\n      "]))),ref:t},U||(U=Object(G.d)(review_page_Divider,null)),Object(G.d)(Oe.a,{container:!0,"data-e2e":"note-card"},Object(G.d)(Oe.a,{item:!0,xs:12,sm:5,md:5,lg:4,xl:3,css:{padding:"0 var(--cds-spacing-400) 0 0"}},Object(G.d)(note_NoteInformation,{note:n,course:a})),Object(G.d)(Oe.a,{item:!0,xs:12,sm:7,md:7,lg:8,xl:9},Object(G.d)(Oe.a,{container:!0,direction:"column",css:{height:"100%"}},Object(G.d)(Oe.a,{item:!0,css:{marginLeft:"var(--cds-spacing-50)"}},Object(G.d)(Me.a,{component:"p",variant:"bodyPrimary","data-e2e":"video-section-text"},n.transcriptText)),s===We.VIEW&&Object(G.d)(note_NoteView,{setCurrentState:u,text:n.noteText,note:n}),s===We.EDIT&&Object(G.d)(note_NoteEdit,{setCurrentState:u,text:n.noteText,onSave:function(e){return r(n.id,e)}}),s===We.DELETE&&Object(G.d)(note_NoteDelete,{setCurrentState:u,onDelete:function(){return o(n.id)},note:n,text:m?ge()("#{itemName} from time #{noteStartTimestamp} to #{noteEndTimestamp}",{itemName:d,noteStartTimestamp:l,noteEndTimestamp:m}):ge()("#{itemName} from time #{noteStartTimestamp}",{itemName:d,noteStartTimestamp:l})})))))})),NoteList_NoteList=function(e){var t=function(){var e=Object(J.useRef)(null);return[Object(J.useCallback)((function(t){t&&t.querySelectorAll("a")[0].focus();e.current=t}),[])]}(),n=B()(t,1)[0];return Object(G.d)(data_ContentNotesDataProvider,{pageSize:20,contentType:e.module?"module":"course",course:e.course,module:e.module},(function(t){var a=t.notes,r=t.onLastPage,o=t.fetchNextPage,i=t.error,c=t.loadingInitialPage,s=t.loadingNextPage,u=t.updateNote,d=t.deleteNote;if(i)return D||(D=Object(G.d)(private_NotesReviewPageDataState,{dataState:"error"}));if(c)return k||(k=Object(G.d)(private_NotesReviewPageDataState,{dataState:"loading"}));if(!a||0===a.length)return M||(M=Object(G.d)(private_NotesReviewPageDataState,{dataState:"empty"}));var l=function(e){for(var t,n,a,r,o,i,c=0,s=c+1;s<e.length;){for(;s<e.length&&e[s].itemName===e[s-1].itemName;)s+=1;n=c,a=s,r=void 0,o=void 0,i=void 0,r=(t=e).slice(0,n),o=t.slice(a),i=t.slice(n,a).sort(ye.a),t.length=0,t.push.apply(t,xe()(r.concat(i).concat(o))),e=t,s=(c=s)+1}return e}(a);return Object(G.d)(Z.a.Fragment,null,Object(G.d)("ul",{css:Object(G.c)(V||(V=R()(["\n                margin: 0;\n                padding: 0;\n              "])))},l.map((function(t){return Object(G.d)(Qe,{course:e.course,key:t.id,note:t,onSave:function(n,a){var r;u(n,Object(ke.d)({itemId:t.itemId,courseId:e.course.id,highlight:be()(be()({},t),{},{noteText:null!==(r=null!=a?a:t.noteText)&&void 0!==r?r:""}),languageCode:t.languageCode}))},onDelete:function(e){return d(e)},ref:t.shouldFocusOn?n:void 0})}))),W||(W=Object(G.d)(review_page_Divider,null)),!r&&Object(G.d)(Oe.a,{container:!0,justifyContent:"center"},Object(G.d)(je.a,{variant:"secondary",disabled:s,onClick:o},s?ge()("Loading Notes..."):ge()("See More Notes"))))}))},qe=t("He/R"),He=t("fguj"),Re={container:Object(G.c)(z||(z=R()(["\n    margin: var(--cds-spacing-150) 0 var(--cds-spacing-300);\n  "]))),selectField:Object(G.c)(L||(L=R()(["\n    "," {\n      max-width: 306px;\n    }\n  "])),ee.a.down("xs"))},review_page_NotesPageFilterDropdown=function(e){var t=e.course,n=e.modules,a=e.selectedContentId,r=e.onSelect,o=void 0===r?function(){}:r,i=a||t.id,c=be()({contentType:"course"},t),s=n.map((function(module){return be()({contentType:"module"},module)})),u=[c].concat(xe()(s));return Object(G.d)("div",{css:Re.container,className:"rc-NotesPageFilterDropdown"},Object(G.d)(qe.a,{label:ge()("Filter"),value:i,onChange:function(e){return o(e.target.value)},css:Re.selectField},u.map((function(e){var t=e&&"course"!==e.contentType?e.name:ge()("All notes");return Object(G.d)(He.a,{key:e.id,value:e.id},t)}))))};t.d(e,"NotesReviewPageWithCourseData",(function(){return NotesReviewPage_NotesReviewPageWithCourseData}));var NotesReviewPage_NotesReviewPageWithCourseData=function(e){var t=Object(J.useState)(),n=B()(t,2),a=n[0],r=n[1];J.useEffect((function(){ae.a.get("LearnerNotesPendoSampleIncluded")&&Object(ne.a)()}),[]);var o=Object(K.a)();return Object(G.d)("div",{css:Object(G.c)(F||(F=R()(["\n        "," {\n          margin: var(--cds-spacing-400) 0;\n        }\n\n        "," {\n          margin: var(--cds-spacing-200) 0;\n        }\n\n        a:focus {\n          outline-offset: 2px;\n        }\n\n        /* \n          We are setting the typography of components that are not yet migrated to CDS and that are still being used by the original page \n          We don't want to override the font if the rest of the page is not using CDS\n        */\n        .rc-NotesReviewPageDataState * {\n          ",";\n        }\n\n        .rc-NotesReviewPageDataState {\n          margin: var(--cds-spacing-600) 0 0;\n        }\n      "])),ee.a.up("md"),ee.a.down("sm"),o.typography.h2)},Object(G.d)(te.a,{variant:"h1semibold",css:Object(G.c)(A||(A=R()(["\n          margin: 0 0 var(--cds-spacing-600);\n          "," {\n            margin: 0 0 var(--cds-spacing-400);\n          }\n        "])),ee.a.down("sm"))},ge()("Notes")),Object(G.d)(review_page_NotesPageFilterDropdown,{modules:e.modules,course:e.course,selectedContentId:a,onSelect:r}),Object(G.d)(NoteList_NoteList,{course:e.course,module:e.modules.find((function(e){return e.id===a}))||null}))},Ye=X.a.createTrackedContainer((function(e){return{namespace:{page:"notes_review"},courseId:e.course.id}}))(NotesReviewPage_NotesReviewPageWithCourseData);e.default=function(e){var t=e.params.courseSlug;return Object(G.d)(data_CourseContentDataProvider,{courseSlug:t},(function(e){var t=e.course,n=e.modules,a=e.error,r=e.loading;return a?Q||(Q=Object(G.d)(private_NotesReviewPageDataState,{dataState:"error"})):r?q||(q=Object(G.d)(private_NotesReviewPageDataState,{dataState:"loading"})):Object(G.d)(Ye,{course:t,modules:n})}))}},mDxB:function(module,e,t){"use strict";t.d(e,"e",(function(){return reshapeHighlightForClient})),t.d(e,"f",(function(){return updateHighlight})),t.d(e,"b",(function(){return g})),t.d(e,"c",(function(){return deleteHighlight})),t.d(e,"a",(function(){return compareHighlightsByStartTimestamp})),t.d(e,"d",(function(){return p}));var n=t("fsL8"),a=t.n(n),r=t("yXPU"),o=t.n(r),i=t("fw5G"),c=t.n(i),s=t("v6sC"),u=t("sQ/U"),d=t("p6CZ"),l=Object(s.a)("/api/userNotes.v1",{type:"rest"}),m=function(){var e=o()(a()().mark((function _callee(e,t,n,r,o){var i,u,m,g,p;return a()().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=(new c.a).addQueryParam("action","getScreenShotUploadUrlV2").addQueryParam("courseId",e).addQueryParam("itemId",t).addQueryParam("userId",r).addQueryParam("timestamp",n),a.next=3,l.post(i.toString());case 3:return u=a.sent,m=u.split("?")[0],g=Object(d.c)(o),p=Object(s.a)(u,{type:"rest"}),a.next=9,p.put("",{contentType:"image/png",data:g,processData:!1});case 9:return a.abrupt("return",m);case 10:case"end":return a.stop()}}),_callee)})));return function(t,n,a,r,o){return e.apply(this,arguments)}}(),reshapeHighlightForClient=function(e){var t=e.id,n=e.createdAt,a=e.updatedAt,r=e.userText,o=e.shouldFocusOn,i=e.details.definition,c=i.noteEndTs,s=i.noteStartTs,u=i.captureTs,d=i.snapshotUrl,l=i.transcriptTextStartIndex,m=i.transcriptTextEndIndex,g=i.transcriptText;return{id:t,itemId:i.itemId,itemName:i.itemName,clientId:t,createdAt:n,updatedAt:a,languageCode:i.languageCode,noteText:r,noteEndTs:c&&c/1e3,noteStartTs:s&&s/1e3,captureTs:u&&u/1e3,snapshotUrl:d,transcriptTextStartIndex:l,transcriptTextEndIndex:m,transcriptText:g,pendingCreate:!1,pendingUpdate:!1,shouldFocusOn:o}},updateHighlight=function(e){var t=e.itemId,n=e.courseId,a=e.languageCode,r=e.id,o=e.highlight,i=new c.a(r),s=Object(d.d)({itemId:t,courseId:n,highlight:o,languageCode:a});return l.put(i.toString(),{data:s})},g=function(){var e=o()(a()().mark((function _callee2(e){var t,n,r,o,i,c,s,g,p,f,v;return a()().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=e.itemId,i=e.courseId,c=e.languageCode,s=e.highlight,g=Object(d.d)({itemId:o,courseId:i,highlight:s,languageCode:c}),p=u.a.get().id,!s.snapshotDataUrl){a.next=8;break}return a.next=6,m(i,o,g.details.definition.noteStartTs,p,s.snapshotDataUrl);case 6:f=a.sent,g.details.definition.snapshotUrl=f;case 8:return a.next=10,l.post("",{data:g});case 10:return v=a.sent,a.abrupt("return",{id:v.elements[0].id,snapshotUrl:(null===(t=v.elements[0])||void 0===t?void 0:null===(n=t.details)||void 0===n?void 0:null===(r=n.definition)||void 0===r?void 0:r.snapshotUrl)||""});case 12:case"end":return a.stop()}}),_callee2)})));return function(t){return e.apply(this,arguments)}}(),deleteHighlight=function(e){var t=e.id,n=new c.a(t);return l.delete(n.toString())},compareHighlightsByStartTimestamp=function(e,t){return e.noteStartTs<t.noteStartTs?-1:e.noteStartTs>t.noteStartTs?1:0},p=function(){var e=o()(a()().mark((function _callee3(e){var t,n,r,o,i;return a()().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.itemId,n=e.courseId,r=e.languageCode,o=(new c.a).addQueryParam("itemId",t).addQueryParam("courseId",n).addQueryParam("languageCode",r).addQueryParam("q","courseItemLanguageCode").addQueryParam("fields","id, userText, createdAt, updatedAt, details"),a.next=4,l.get(o.toString());case 4:return i=a.sent,a.abrupt("return",i.elements.map(reshapeHighlightForClient).sort(compareHighlightsByStartTimestamp));case 6:case"end":return a.stop()}}),_callee3)})));return function(t){return e.apply(this,arguments)}}()},nS3k:function(module,exports,e){e("D77H")},p6CZ:function(module,e,t){"use strict";var n=t("k8gO"),a=t("F9YM");t.d(e,"c",(function(){return getBlobFromDataURI})),t.d(e,"b",(function(){return highlightUtils_generateHighlightFromTranscriptSelection})),t.d(e,"a",(function(){return highlightUtils_generateHighlightFromCaptureButton})),t.d(e,"d",(function(){return getDraftFromHighlight}));var getBlobFromDataURI=function(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],a=new ArrayBuffer(t.length),r=new Uint8Array(a),o=0;o<t.length;o+=1)r[o]=t.charCodeAt(o);return new Blob([a],{type:n})},highlightUtils_generateHighlightFromTranscriptSelection=function(e,t){var a=e.transcriptTextStartIndex,r=e.transcriptTextEndIndex,o=t.cues.filter((function(e){return e.index>=a.cueIndex&&e.index<=r.cueIndex})),i=o.reduce((function(e,t){var n=t.index,o=t.text,i=a.cueIndex,c=a.textIndex,s=r.cueIndex,u=r.textIndex;return n===i?n===s?"".concat(e).concat(o.substring(c,u+1)):"".concat(e).concat(o.substring(c)):n===s?"".concat(e," ").concat(o.substring(0,u+1)):"".concat(e," ").concat(o)}),""),c=Object(n.a)(),s=c,u=o[0],d=o[o.length-1].endTime;return{id:c,clientId:s,captureTs:u.startTime,noteStartTs:u.startTime,noteEndTs:d,transcriptText:i,noteText:"",languageCode:t.languageCode,transcriptTextStartIndex:a,transcriptTextEndIndex:r,pendingCreate:!0,pendingUpdate:!1}},highlightUtils_generateHighlightFromCaptureButton=function(e,t){var r=Object(n.a)(),o=r,i=e.languageCode,c=t.currentTime(),s=Object(a.d)(e.cues,c,i),u=s[0],d=s[s.length-1],l=s.reduce((function(e,t){return t.index===u.index?"".concat(e).concat(t.text):"".concat(e," ").concat(t.text)}),""),m={textIndex:0,cueIndex:u.index},g={textIndex:d.text.length-1,cueIndex:d.index},p=d.endTime;return{id:r,clientId:o,captureTs:c,noteStartTs:u.startTime,noteEndTs:p,transcriptText:l,noteText:"",languageCode:i,transcriptTextStartIndex:m,transcriptTextEndIndex:g,snapshotDataUrl:function(e){var t=document.createElement("canvas");t.width=960,t.height=540;var n=e.el().querySelector("video"),a=t.getContext("2d");return a&&n&&a.drawImage(n,0,0,t.width,t.height),t.toDataURL("image/jpeg")}(t),pendingCreate:!0,pendingUpdate:!1}},getDraftFromHighlight=function(e){var t=e.itemId,n=e.courseId,a=e.highlight,r=e.languageCode,o=a.noteStartTs,i=a.noteEndTs,c=a.captureTs,s=a.snapshotUrl,u=a.transcriptText,d=a.noteText,l=a.transcriptTextEndIndex;return{details:{typeName:"video",definition:{itemId:t,courseId:n,snapshotUrl:s||"",transcriptTextStartIndex:a.transcriptTextStartIndex,transcriptTextEndIndex:l,languageCode:r,transcriptText:u,noteEndTs:i&&1e3*i,captureTs:c&&1e3*c,noteStartTs:o&&1e3*o}},userNote:d}}}}]);
//# sourceMappingURL=en.79.542e87d5a0c491aeb805.js.map